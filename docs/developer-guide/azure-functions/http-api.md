---
layout: default
title: HTTP API
parent: Azure Functions
grand_parent: Developer Reference
nav_order: 3
permalink: /docs/developer-guide/azure-functions/http-api/
---

# Durable Functions HTTP API Reference
{: .no_toc }

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

The Durable Functions extension exposes built-in HTTP APIs for managing orchestrations, entities, and task hubs.

---

## Overview

All HTTP APIs follow this base URL pattern:

- **Local development:** `http://localhost:7071/runtime/webhooks/durabletask/...`
- **Azure hosted:** `https://{appName}.azurewebsites.net/runtime/webhooks/durabletask/...`

### Common Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `taskHub` | Query string | Task hub name (defaults to app's configured hub) |
| `connection` | Query string | Connection app setting name |
| `code` | Query string | System key for authorization |

> **Note:** The `systemKey` is auto-generated by Azure Functions and grants access to Durable Task extension APIs.

---

## Orchestration APIs

### Start Orchestration

Start a new orchestration instance.

**Request**
```http
POST /runtime/webhooks/durabletask/orchestrators/{functionName}/{instanceId?}
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `functionName` | URL | Orchestrator function name |
| `instanceId` | URL (optional) | Custom instance ID (auto-generated if not provided) |
| Request body | JSON | Orchestrator input |

**Response (HTTP 202)**
```json
{
    "id": "abc123",
    "statusQueryGetUri": "http://localhost:7071/runtime/webhooks/durabletask/instances/abc123?code=XXX",
    "sendEventPostUri": "http://localhost:7071/runtime/webhooks/durabletask/instances/abc123/raiseEvent/{eventName}?code=XXX",
    "terminatePostUri": "http://localhost:7071/runtime/webhooks/durabletask/instances/abc123/terminate?reason={text}&code=XXX",
    "purgeHistoryDeleteUri": "http://localhost:7071/runtime/webhooks/durabletask/instances/abc123?code=XXX",
    "suspendPostUri": "http://localhost:7071/runtime/webhooks/durabletask/instances/abc123/suspend?reason={text}&code=XXX",
    "resumePostUri": "http://localhost:7071/runtime/webhooks/durabletask/instances/abc123/resume?reason={text}&code=XXX"
}
```

**Status Codes**
- `202 Accepted` - Orchestration scheduled
- `400 Bad Request` - Invalid function name, instance ID, or JSON

---

### Get Instance Status

Get the status of a specific orchestration instance.

**Request**
```http
GET /runtime/webhooks/durabletask/instances/{instanceId}
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
    &showHistory={true|false}
    &showHistoryOutput={true|false}
    &showInput={true|false}
    &returnInternalServerErrorOnFailure={true|false}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `instanceId` | URL | Orchestration instance ID |
| `showHistory` | Query (optional) | Include execution history |
| `showHistoryOutput` | Query (optional) | Include outputs in history |
| `showInput` | Query (optional) | Include input in response (default: true) |
| `returnInternalServerErrorOnFailure` | Query (optional) | Return 500 on failure state |

**Response (HTTP 200/202)**
```json
{
    "name": "HelloOrchestrator",
    "instanceId": "abc123",
    "runtimeStatus": "Completed",
    "input": "world",
    "customStatus": null,
    "output": ["Hello Tokyo!", "Hello Seattle!", "Hello London!"],
    "createdTime": "2024-01-15T10:00:00Z",
    "lastUpdatedTime": "2024-01-15T10:00:05Z"
}
```

**Runtime Status Values**
- `Running` - Currently executing
- `Pending` - Scheduled but not yet started
- `Completed` - Finished successfully
- `Failed` - Terminated with error
- `Canceled` - Canceled
- `Terminated` - Explicitly terminated
- `Suspended` - Suspended and waiting to resume

**Status Codes**
- `200 OK` - Completed or failed
- `202 Accepted` - Still in progress
- `400 Bad Request` - Invalid instance ID
- `404 Not Found` - Instance doesn't exist
- `500 Internal Server Error` - Failed (when `returnInternalServerErrorOnFailure=true`)

---

### Get All Instances

Query status of multiple orchestration instances.

**Request**
```http
GET /runtime/webhooks/durabletask/instances
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
    &createdTimeFrom={timestamp}
    &createdTimeTo={timestamp}
    &runtimeStatus={status1,status2}
    &instanceIdPrefix={prefix}
    &showInput={true|false}
    &top={count}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `createdTimeFrom` | Query (optional) | Filter: created at or after (ISO8601) |
| `createdTimeTo` | Query (optional) | Filter: created at or before (ISO8601) |
| `runtimeStatus` | Query (optional) | Filter by status (comma-separated) |
| `instanceIdPrefix` | Query (optional) | Filter by instance ID prefix |
| `top` | Query (optional) | Limit number of results |

**Response**
```json
[
    {
        "instanceId": "abc123",
        "runtimeStatus": "Completed",
        "input": null,
        "customStatus": null,
        "output": ["Hello Tokyo!", "Hello Seattle!", "Hello London!"],
        "createdTime": "2024-01-15T10:00:00Z",
        "lastUpdatedTime": "2024-01-15T10:00:05Z"
    },
    {
        "instanceId": "def456",
        "runtimeStatus": "Running",
        "input": null,
        "customStatus": null,
        "output": null,
        "createdTime": "2024-01-15T10:01:00Z",
        "lastUpdatedTime": "2024-01-15T10:01:02Z"
    }
]
```

**Pagination**

If more results exist, a continuation token is returned in the `x-ms-continuation-token` response header. Include it in subsequent requests as a request header.

---

### Raise Event

Send an event to a waiting orchestration.

**Request**
```http
POST /runtime/webhooks/durabletask/instances/{instanceId}/raiseEvent/{eventName}
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `instanceId` | URL | Target orchestration instance ID |
| `eventName` | URL | Name of the event to raise |
| Request body | JSON | Event payload |

**Example**
```http
POST /runtime/webhooks/durabletask/instances/abc123/raiseEvent/ApprovalReceived
Content-Type: application/json

{
    "approved": true,
    "approvedBy": "manager@example.com"
}
```

**Status Codes**
- `202 Accepted` - Event accepted
- `400 Bad Request` - Invalid JSON
- `404 Not Found` - Instance not found
- `410 Gone` - Instance completed or failed

---

### Terminate Instance

Terminate a running orchestration.

**Request**
```http
POST /runtime/webhooks/durabletask/instances/{instanceId}/terminate
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
    &reason={text}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `instanceId` | URL | Instance to terminate |
| `reason` | Query (optional) | Termination reason |

**Status Codes**
- `202 Accepted` - Terminate request accepted
- `404 Not Found` - Instance not found
- `410 Gone` - Already completed or failed

---

### Suspend Instance

Suspend a running orchestration.

**Request**
```http
POST /runtime/webhooks/durabletask/instances/{instanceId}/suspend
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
    &reason={text}
```

**Status Codes**
- `202 Accepted` - Suspend request accepted
- `404 Not Found` - Instance not found
- `410 Gone` - Completed, failed, or terminated

---

### Resume Instance

Resume a suspended orchestration.

**Request**
```http
POST /runtime/webhooks/durabletask/instances/{instanceId}/resume
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
    &reason={text}
```

**Status Codes**
- `202 Accepted` - Resume request accepted
- `404 Not Found` - Instance not found
- `410 Gone` - Completed, failed, or terminated

---

### Rewind Instance (Preview)

Restore a failed orchestration by replaying failed operations.

**Request**
```http
POST /runtime/webhooks/durabletask/instances/{instanceId}/rewind
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
    &reason={text}
```

**Status Codes**
- `202 Accepted` - Rewind request accepted
- `404 Not Found` - Instance not found
- `410 Gone` - Completed or terminated

---

### Purge Instance History

Delete the history of a single orchestration instance.

**Request**
```http
DELETE /runtime/webhooks/durabletask/instances/{instanceId}
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
```

**Response (HTTP 200)**
```json
{
    "instancesDeleted": 1
}
```

**Status Codes**
- `200 OK` - History purged
- `404 Not Found` - Instance not found

---

### Purge Multiple Instances

Delete history for multiple instances matching filter criteria.

**Request**
```http
DELETE /runtime/webhooks/durabletask/instances
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
    &createdTimeFrom={timestamp}
    &createdTimeTo={timestamp}
    &runtimeStatus={status1,status2}
```

**Response (HTTP 200)**
```json
{
    "instancesDeleted": 250
}
```

---

## Entity APIs

### Signal Entity

Send a one-way operation to an entity. Creates the entity if it doesn't exist.

**Request**
```http
POST /runtime/webhooks/durabletask/entities/{entityName}/{entityKey}
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
    &op={operationName}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `entityName` | URL | Entity type name |
| `entityKey` | URL | Entity instance key |
| `op` | Query (optional) | Operation name |
| Request body | JSON | Operation input |

**Example**
```http
POST /runtime/webhooks/durabletask/entities/Counter/myCounter?op=add
Content-Type: application/json

5
```

**Status Codes**
- `202 Accepted` - Signal accepted
- `400 Bad Request` - Invalid JSON or entity key
- `404 Not Found` - Entity name not found

---

### Get Entity State

Get the current state of an entity.

**Request**
```http
GET /runtime/webhooks/durabletask/entities/{entityName}/{entityKey}
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
```

**Response (HTTP 200)**
```json
{
    "currentValue": 5
}
```

**Status Codes**
- `200 OK` - Entity exists
- `404 Not Found` - Entity not found

---

### List Entities

Query multiple entities.

**Request**
```http
GET /runtime/webhooks/durabletask/entities/{entityName?}
    ?taskHub={taskHub}
    &connection={connection}
    &code={systemKey}
    &lastOperationTimeFrom={timestamp}
    &lastOperationTimeTo={timestamp}
    &fetchState={true|false}
    &top={count}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `entityName` | URL (optional) | Filter by entity type |
| `fetchState` | Query (optional) | Include entity state in response |
| `lastOperationTimeFrom` | Query (optional) | Filter by last operation time |
| `lastOperationTimeTo` | Query (optional) | Filter by last operation time |
| `top` | Query (optional) | Limit results |

**Response**
```json
[
    {
        "entityId": { "name": "counter", "key": "myCounter" },
        "lastOperationTime": "2024-01-15T10:30:00Z",
        "state": { "currentValue": 5 }
    },
    {
        "entityId": { "name": "counter", "key": "otherCounter" },
        "lastOperationTime": "2024-01-15T10:25:00Z",
        "state": { "currentValue": 10 }
    }
]
```

---

## Generating Management URLs

Use the durable client binding to generate URLs with proper authentication:

### .NET

```csharp
[FunctionName("HttpStart")]
public static async Task<HttpResponseMessage> HttpStart(
    [HttpTrigger(AuthorizationLevel.Anonymous, "post")] HttpRequestMessage req,
    [DurableClient] IDurableOrchestrationClient client)
{
    string instanceId = await client.StartNewAsync("MyOrchestrator", null);
    
    // Creates response with all management URLs
    return client.CreateCheckStatusResponse(req, instanceId);
    
    // Or get URLs as a payload object
    var payload = client.CreateHttpManagementPayload(instanceId);
}
```

### JavaScript

```javascript
const df = require('durable-functions');

module.exports = async function (context, req) {
    const client = df.getClient(context);
    const instanceId = await client.startNew('MyOrchestrator');
    
    // Creates response with all management URLs
    return client.createCheckStatusResponse(req, instanceId);
    
    // Or get URLs as a payload object
    const payload = client.createHttpManagementPayload(instanceId);
};
```

### Python

```python
async def http_start(req: func.HttpRequest, client: df.DurableOrchestrationClient):
    instance_id = await client.start_new("MyOrchestrator")
    
    # Creates response with all management URLs
    return client.create_check_status_response(req, instance_id)
    
    # Or get URLs as a payload object
    payload = client.create_http_management_payload(instance_id)
```

---

## Async HTTP Pattern

The HTTP APIs implement the [Polling Consumer Pattern](https://docs.microsoft.com/en-us/azure/architecture/patterns/async-request-reply):

1. Client sends POST to start orchestration
2. Server returns 202 with `Location` header
3. Client polls `Location` URL
4. Server returns 202 while running, 200 when complete

**Response Headers**
- `Location` - Status query URL
- `Retry-After` - Suggested polling interval (default: 10 seconds)

---

## Next Steps

- [host.json Settings →](./host-json.md)
- [Bindings Reference →](./bindings.md)
- [Instance Management →](../../concepts/instance-management.md)
